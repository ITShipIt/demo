{
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Description" : "Now It Works",
  "Resources" : {
    "MyFirstSG" : {
      "Type" : "AWS::EC2::SecurityGroup",
      "Properties" : {
      "GroupName" : "MyFirstSG",
      "GroupDescription" : "It is not my first or my last SG",
      "SecurityGroupIngress" : [{
        "CidrIp" : "0.0.0.0/0",
        "Description" : "It Works",
        "FromPort" : "22",
        "IpProtocol" : "tcp",
        "ToPort" : "22"
      },
      {
        "CidrIp" : "0.0.0.0/0",
        "Description" : "It Works",
        "FromPort" : "8080",
        "IpProtocol" : "tcp",
        "ToPort" : "8080"
      },
      {
        "CidrIp" : "0.0.0.0/0",
        "Description" : "It Works",
        "FromPort" : "4000",
        "IpProtocol" : "tcp",
        "ToPort" : "4000"
      }]
      }
    },
    "MyEC2Instance" : {
      "Type" : "AWS::EC2::Instance",
      "Properties" : {
        "ImageId" : "ami-05e5625791683494f",
        "InstanceType" : "t2.micro",
        "KeyName" : "Op-aws-Test",
        "SecurityGroups" : [ "MyFirstSG"]
      },
      "DependsOn" : "MyFirstSG"
    }
  }
}